<!DOCTYPE html>
<html>
	<head>
		<title>Trihard spin</title>
		<style type="text/css">
			img {
				width:100px;
				height: 100px;
			}
		</style>
	</head>

	<body>
	<img id='slot1'>
	<img id='slot2'>
	<img id='slot3'>
	<button onclick="spin()">Spin!</button>
	</body>
	<script type="text/javascript">
	var slots = [Math.floor(Math.random()*5)+1, Math.floor(Math.random()*5)+1, Math.floor(Math.random()*5)+1]
	        document.getElementById('slot1').src = `${slots[0]}.png`
        document.getElementById('slot2').src = `${slots[1]}.png`
        document.getElementById('slot3').src = `${slots[2]}.png`
    var slotprocess = []
	function update(x){
        document.getElementById('slot1').src = `${x[0]}.png`
        document.getElementById('slot2').src = `${x[2]}.png`
        document.getElementById('slot3').src = `${x[4]}.png`
	}

	function add(z){
		slotprocess.push(z)
	}
	function spin(){
		slotprocess = []
		for (var i = 0;i<slots.length;i++){
            var spins = Math.floor(Math.random()*5)+16
            while(spins > 0){
            	for(var slot = i;slot<slots.length;slot++){
            		if (slots[slot] == 5){
            			slots[slot] = 1
            		}else{
            			slots[slot] = slots[slot] + 1
            		}

            	}
                spins = spins - 1
            	add(`${slots}`)
           
            }
		}
		var slotcurrprocess = 0
		var x = setInterval(function(){
			console.log(`hello ${slotprocess}`)
            update(slotprocess[slotcurrprocess])
            slotcurrprocess++
            if (slotcurrprocess == slotprocess.length){
            	clearInterval(x)
            }
		},100)
	}	
	</script>
</html>